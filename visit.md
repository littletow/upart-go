# 豆子碎片

豆子碎片是展示和搜索文章的微信小程序。它的项目名称是 visit，该项目经历多个版本迭代。现在已经成熟和稳定。

visit 项目在小程序端的二维码：

![豆子碎片](https://www.91demo.top/visit.webp#pic_center)

## 云环境版本

visit 项目使用小程序云环境，在云存储中存放文章的 markdown 文件，然后小程序调用云函数获取使用 towxml 包转换后的 json 数据，在小程序端进行渲染。
新的 towxml 组件必须使用微信小程序基础库 2.9.4 版本以上，才能正常显示。
该项目在搜索时，是根据文章标题和关键字进行模糊查询检索匹配的。
在云环境开始收费后，转为服务器版本。
服务器灵活性强，可操作空间大，可以有多种用途。

## 服务器版本

visit 项目当前使用服务器版本，在服务器使用数据库存储 markdown 文件的数据。小程序调用 API 开放接口从后台获取文件的数据，在前端使用 towxml 组件进行渲染。

注意：小程序端只有文章显示和搜索功能。 主要是方便上架审核。上传和管理文章等通过后台接口或工具完成，文章使用 Markdown 格式。

当制作好文档后，需要使用工具或者 API 开放接口上传到后台。

- 使用工具上传，工具请使用开源项目 [upart-go 项目](https://gitee.com/littletow/upart-go)
- 使用 API 开放接口上传，API 接口文档请访问[开放接口](https://www.91demo.top/zh-cn/api/index.html)

## 项目介绍

visit 项目主要是为了在小程序端记录和分享技术文章，也是学习小程序的入门项目。上传的文章以编程技术或技术相关经验为主题。
小程序包含首页和我的两个栏目，首页显示公开的和自己上传的文章，可通过关键字搜索文章，搜索文章时，是通过文章标题或关键字进行模糊查询检索匹配。
也可以使用快捷按钮检索文章，快捷按钮目前包含 3 个：最新，最近上传的文章；最火，浏览量最高的文章；最冷，浏览量最低的文章。
我的页面只有两个功能，一个是获取我的识别码，使用工具，或者开放接口时需要用到此识别码，用作 API 接口认证。
另一个是看广告获取点数。上传文章是需要豆子点数的。
加入广告，是为了希望获取一点收益，承担一点我的服务器支出。
文章可通过工具上传，工具可使用 upart-go 开源项目。
如果要公开文章，那么公开的文章需要后台审核。
文章也可以加锁，当加锁后，其它用户访问你的文章，你将获得豆子点数奖励。

直接在 Markdown 文件中添加的图片链接在小程序端是无法打开的。如果确实需要在文章中显示图片，可以将图床域名地址告知我，添加到小程序域名白名单中。
目前有一个方案是微信公众号图片小程序不会过滤，可以将您的图片上传到微信公众号，然后获取图片链接，添加到 markdown 文件中。

在 Markdown 文件中添加的 HTTP 和 HTTPS 链接在小程序端无法打开。

豆子碎片完整使用由四部分应用组成：小程序端，上传文章工具，Web 审核后台，以及后台接口服务。

- 小程序端，用来显示和搜索文章。
- 上传文章工具，用于上传文章，以及管理文章。
- Web 审核后台，用来管理待审核的文章。
- 后台接口服务，为上面三个终端提供服务，将数据存储在服务器，并处理数据。

其中，小程序端和上传文章工具已开源，其它两项也将以教程的方式持续的发布在[豆子笔记](https://www.91demo.top)中。

**注意**，该项目是开源项目，请勿上传非法或重要敏感资料。
